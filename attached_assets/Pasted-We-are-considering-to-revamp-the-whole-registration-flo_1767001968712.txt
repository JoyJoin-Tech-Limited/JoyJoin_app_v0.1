We are considering to revamp the whole registration flow from login page, we donâ€™t require login upfront to start the onboarding flow. Please adjust based on following requirements.
Master Prompt: Yueju App Onboarding & Profile Completion System
Project Overview
Build a Duolingo-inspired onboarding flow for a social matching app (yuejuapp.com) that combines template-based onboarding with AI-powered profile enrichment. The system should maximize retention while progressively collecting user data for optimal matching.

Phase 1: Template-Based Onboarding Flow (NO AI)
Visual Design System
UI Framework:
All elements: rounded corners (16px for cards, 12px for buttons)
Typography: Clean sans-serif, white text with subtle shadows
Mascot character positioned center-left with speech bubble next to it
Animation Standards:
All transitions: 300-400ms ease-in-out
Mascot idle animation: subtle breathing/bounce (2s loop)
Speech bubble: scale from 0.9 to 1.0 with fade-in
List items: stagger fade-in (50ms delay between items)
Button press: scale to 0.95 with haptic feedback
Progress bar: smooth width transition
Onboarding Sequence
Screen 1: Welcome
[Mascot with speech bubble]
"å—¨ï¼æˆ‘æ˜¯å°æ‚…ï¼Œå¸®ä½ æ‰¾åˆ°æœ€åˆæ‹çš„æœ‹å‹ ğŸ‘‹"

[Single primary colour button â‡’ large for accessibility]
å¼€å§‹æ¢ç´¢ â†’

Screen 2-6: Personality Test (5 Questions)
Progress bar: [â–ˆâ–‘â–‘â–‘â–‘] 20% â†’ [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 100%

[Mascot with speech bubble]
"Question text here"

[Vertical list of options]
â˜ Option 1
â˜ Option 2  
â˜ Option 3
â˜ Option 4

[Continue button - disabled until selection]

5 questions minimum before sign-up gate
Single selection with immediate visual feedback
Auto-scroll to next question on selection
Screen 7: Sign-Up Gate
[Mascot excited animation]
"å¿«è¦æ­æ™“ä½ çš„ç¤¾äº¤è§’è‰²äº†ï¼ğŸ‰"
"ç™»å½•æŸ¥çœ‹ç»“æœå¹¶è§£é”å®Œæ•´æµ‹è¯•"

[Social login buttons - stacked]
ğŸ“± å¾®ä¿¡ç™»å½•
ğŸ Apple ID ç™»å½•
ğŸ“§ é‚®ç®±ç™»å½•

[Small text]
2åˆ†é’Ÿå®Œæˆå‰©ä½™æµ‹è¯•

Screen 8-16: Remaining Personality Questions (10 Questions)
Same UI as Screen 2-6
Progress bar continues from 33% â†’ 100%
Keep momentum with smooth transitions
Screen 17: Personality Results Reveal
[Animated role badge appearing]
"ä½ æ˜¯ï¼š[ç¤¾äº¤è§’è‰²åç§°]"
[Role description - 2-3 sentences]

[Characteristics listed with icons]
âœ¨ Trait 1
ğŸ’« Trait 2  
ğŸŒŸ Trait 3

[CTA button]
å®Œå–„èµ„æ–™ï¼Œæ‰¾åˆ°åŒç±» â†’

Screen 18: Essential Data Collection
[Mascot with speech bubble]
"æœ€å4ä¸ªé—®é¢˜ï¼Œå¸®ä½ æ‰¾åˆ°æœ€åˆæ‹çš„äºº"

æ˜µç§°ï¼š[text input - placeholder: "è‡³å°‘2ä¸ªå­—ç¬¦"]
æ€§åˆ«ï¼š[å¥³ç”Ÿ | ç”·ç”Ÿ] (button group)
BaseåŸå¸‚ï¼š[æ·±åœ³ | é¦™æ¸¯ | å…¶ä»–] (dropdown)
æ´»åŠ¨æ„å›¾ï¼š[äº¤æœ‹å‹ | æ‹“å±•äººè„‰ | æ·±åº¦è®¨è®º | å¨±ä¹æ”¾æ¾ | æµªæ¼«çº¦ä¼š] (multi-select chips)

[Green button]
è¿›å…¥æ‚¦èš ğŸš€

Screen 19: Extended Data (Soft Required)
[Mascot]
"å†å¤šäº†è§£ä¸€ç‚¹ï¼ŒåŒ¹é…æ›´ç²¾å‡† âš¡"

å‡ºç”Ÿå¹´ä»½ï¼š[1990 â–¼] [æ˜¾ç¤º | ä¿å¯†] toggle
æ„Ÿæƒ…çŠ¶æ€ï¼š[å•èº« | æ‹çˆ±ä¸­ | å·²å©š] (button group)
èŒä¸š/è¡Œä¸šï¼š[Tag selection with search]
å…´è¶£çˆ±å¥½ï¼š[Multi-select tags, 3-5 required]
"é€‰æ‹©3-5ä¸ªä½ æœ€å–œæ¬¢çš„"

[Button]
å®Œæˆ âœ“

[Skip link - small text]
ç¨åå®Œå–„ â†’

Technical Requirements (Phase 1)
// State management
- Store quiz responses locally until sign-up
- Persist incomplete sessions for 24 hours
- Track drop-off points for analytics

// Performance
- Preload next screen during current question
- Compress mascot animations (lottie JSON < 100kb)
- Lazy load images below fold
- Target: <200ms screen transition

// Accessibility
- Keyboard navigation (tab, enter, space)
- Screen reader labels for all interactive elements
- Minimum touch target: 44x44px
- Focus states clearly visible


Phase 2: Profile Strength Gamification
Profile Completion Meter
Place prominently on user profile page:
[Circular progress indicator: 65%]
èµ„æ–™å®Œæ•´åº¦

å®Œå–„èµ„æ–™è·å¾—æ›´å¥½åŒ¹é… â†“

âœ… å®Œæˆæ€§æ ¼æµ‹è¯•
âœ… åŸºæœ¬ä¿¡æ¯å·²å¡«å†™
âœ… å…´è¶£çˆ±å¥½ (3ä¸ª)

ğŸ“ æ·»åŠ 2ä¸ªå…´è¶£æ ‡ç­¾ (+10%)
ğŸ‘¤ å¡«å†™äººç”Ÿé˜¶æ®µ (+8%)
ğŸ—£ï¸ è®¾ç½®è¯­è¨€åå¥½ (+7%)  
ğŸ  å¡«å†™å®¶ä¹¡ (+5%)
ğŸ¾ å® ç‰©åå¥½ (+5%)

[Button]
å¿«é€Ÿå®Œå–„ â†’

Interaction:
Click any incomplete item â†’ Open relevant form/AI chat
Animate percentage increase when completed
Show celebration confetti at 100%
Unlock badge: "èµ„æ–™è¾¾äºº â­"
Context-Triggered Prompts
Trigger 1: After 3 conversations/matches
[Toast notification]
ğŸ’¡ èµ„æ–™å®Œæ•´çš„ç”¨æˆ·è·å¾—3å€ä¼˜è´¨åŒ¹é…
ç‚¹å‡»å®Œå–„ â†’ [Opens AI chat]

Trigger 2: After 5 skips/unmatches
[Modal with mascot]
"æ³¨æ„åˆ°ä½ çš„åŒ¹é…å¯èƒ½ä¸å¤ªç†æƒ³"
"èŠ2åˆ†é’Ÿå¸®ä½ ä¼˜åŒ–æ¨èï¼Ÿ"

[Yes - å¸®æˆ‘ä¼˜åŒ–] [Later - ç¨åå†è¯´]

Trigger 3: After 10 connections milestone
[Celebration screen]
ğŸ‰ ä½ å·²å»ºç«‹10ä¸ªè¿æ¥ï¼
è§£é”é«˜çº§åŒ¹é…ç®—æ³• â†’

[Shows preview of VIP features]


Phase 3: AI-Powered Profile Enrichment (Post-Onboarding Only)
Implementation Architecture
API Integration:
// Hybrid response system
1. Instant UI response (0ms):
   - Show typing indicator immediately
   - Display: "å°æ‚…æ­£åœ¨æ€è€ƒ..." with animated dots

2. Streaming response:
   - Use SSE/WebSocket for word-by-word display
   - Start showing response within 500ms

3. Timeout fallback (if >3s):
   - Switch to template-based quick questions
   - "ç½‘ç»œæœ‰ç‚¹æ…¢ï¼Œè¦ä¸å…ˆå¿«é€Ÿé€‰æ‹©ï¼Ÿ"
   - Resume AI when response arrives

AI Chat Triggers & Contexts
Trigger A: Profile Completion Nudge (Day 2-7) Entry point: Profile completion meter â†’ "å¿«é€Ÿå®Œå–„" button
AI Conversation Flow:

[Mascot avatar in chat]
å°æ‚…: "å—¨ï¼æˆ‘å‘ç°ä½ è¿˜æ²¡å¡«å†™å…´è¶£çˆ±å¥½ã€‚èŠå‡ å¥å¸®ä½ å®Œå–„ï¼Ÿè¿™æ ·èƒ½æ‰¾åˆ°æ›´åˆæ‹çš„æœ‹å‹~ ğŸ˜Š"

[3 quick-tap buttons appear instantly]
[å¸®æˆ‘å®Œå–„å…´è¶£æ ‡ç­¾ ğŸ¯] [ä¼˜åŒ–åŒ¹é…åå¥½ ğŸ’¬] [å‡çº§æˆ‘çš„èµ„æ–™ â­]

User: [Clicks "å¸®æˆ‘å®Œå–„å…´è¶£æ ‡ç­¾"]

å°æ‚…: "å‘¨æœ«ä½ ä¸€èˆ¬å–œæ¬¢åšä»€ä¹ˆï¼Ÿéšä¾¿èŠèŠ~"

User: "çˆ¬å±±ã€çœ‹ç”µå½±ã€å¶å°”å»livehouse"

å°æ‚…: [Shows extracted tags with checkboxes]
"æ˜ç™½äº†ï¼æˆ‘å¸®ä½ æå–äº†è¿™äº›ï¼š
â˜‘ æˆ·å¤–è¿åŠ¨
â˜‘ ç”µå½±
â˜‘ éŸ³ä¹ç°åœº
è¿˜æœ‰å…¶ä»–çš„å—ï¼Ÿ"

User: [Confirms or adds more]

å°æ‚…: "å¤ªæ£’äº†ï¼âœ¨ æœ€åä¸€ä¸ªé—®é¢˜ï¼šä½ æ›´å–œæ¬¢ç²¤è¯­è¿˜æ˜¯å›½è¯­çš„éŸ³ä¹ï¼Ÿ"

User: "éƒ½å¯ä»¥å•Š"

å°æ‚…: "å¥½çš„ï¼å·²æ·»åŠ 'ç²¤è¯­'å’Œ'å›½è¯­'æ ‡ç­¾ã€‚

[Progress animation]
èµ„æ–™å®Œæ•´åº¦: 65% â†’ 85% ğŸ‰

âœ… å·²ä¼˜åŒ–ï¼ä½ çš„åŒ¹é…è´¨é‡é¢„è®¡æå‡40%

[Button: è¿”å›ä¸»é¡µ]"

Trigger B: Match Quality Improvement (After poor matches) Entry point: After 5+ skip/unmatch events
å°æ‚…: "æ³¨æ„åˆ°ä½ æœ€è¿‘çš„åŒ¹é…å¯èƒ½ä¸å¤ªç†æƒ³ã€‚èŠ±1åˆ†é’ŸèŠèŠä½ ç†æƒ³çš„ç¤¾äº¤åœˆï¼Ÿæˆ‘æ¥å¸®ä½ ä¼˜åŒ–ã€‚"

[Quick options]
[æ„Ÿè§‰ä¸åˆæ‹] [æ²¡æœ‰å…±åŒè¯é¢˜] [æ´»åŠ¨æ„å›¾ä¸ä¸€è‡´]

User: "æ²¡æœ‰å…±åŒè¯é¢˜"

å°æ‚…: "æ˜ç™½äº†ã€‚ä½ è¯´æƒ³è¦'æ·±åº¦è®¨è®º'ï¼Œæ˜¯æŒ‡å“²å­¦ç±»çš„è¿˜æ˜¯è¡Œä¸šç›¸å…³çš„è¯é¢˜ï¼Ÿ"

User: "æ›´å¤šæ˜¯ç§‘æŠ€ã€åˆ›ä¸šè¿™äº›"

å°æ‚…: "æ‡‚äº†ï¼é‚£ä½ å¸Œæœ›å¯¹æ–¹æ˜¯ï¼š
A) åŒè¡Œä¸šå¯ä»¥äº¤æµç»éªŒçš„
B) ä¸åŒé¢†åŸŸä½†å…³æ³¨ç§‘æŠ€è¶‹åŠ¿çš„  
C) éƒ½å¯ä»¥"

[Continue contextual questions to refine preferences...]

å°æ‚…: "å·²ä¼˜åŒ–ä½ çš„åŒ¹é…ç®—æ³•ï¼ğŸ¯
æ–°æ¨èæ­£åœ¨åŠ è½½ä¸­..."

Trigger C: Advanced Profile Unlock (After engagement milestone) Entry point: After 10+ connections or 5+ days active
å°æ‚…: "ğŸ‰ ä½ å·²ç»å¾ˆæ´»è·ƒäº†ï¼æƒ³è§£é”VIPåŒ¹é…ç®—æ³•å—ï¼Ÿå¿«é€ŸèŠå‡ ä¸ªé—®é¢˜å°±èƒ½å‡çº§~

[Progress bar]
è¿˜éœ€å®Œæˆ: [â–ˆâ–ˆâ–‘] 3ä¸ªé—®é¢˜ (ä¼°æ—¶: 2åˆ†é’Ÿ)

[å¼€å§‹å‡çº§ â†’] [ç¨åå†è¯´]"

User: [å¼€å§‹å‡çº§]

å°æ‚…: "ä½ ç°åœ¨å¤„äºä»€ä¹ˆäººç”Ÿé˜¶æ®µå‘¢ï¼Ÿ"
[èŒåœºæ–°äºº] [èŒåœºè€æ‰‹] [åˆ›ä¸šä¸­] [å­¦ç”Ÿå…š] [è‡ªç”±èŒä¸š]

å°æ‚…: "ä½ å…»å® ç‰©å—ï¼ŸğŸ±ğŸ¶"
[æœ‰çŒ«] [æœ‰ç‹—] [å…¶ä»–] [æ²¡æœ‰ä½†å–œæ¬¢] [ä¸å…»]

å°æ‚…: "ä½ æ˜¯å“ªé‡Œäººï¼Ÿï¼ˆé€‰å¡«ï¼‰"
[Province/City dropdown]

[After completion]
å°æ‚…: "ğŸŠ æ­å–œå‡çº§VIPåŒ¹é…ï¼
è§£é”åŠŸèƒ½ï¼š
âœ¨ ä¼˜å…ˆæ¨è
ğŸ¯ ç²¾å‡†åº¦+50%
ğŸ’ ä¸“å±ç­›é€‰å™¨

[æ¢ç´¢æ–°åŠŸèƒ½ â†’]"

AI Chat UI Components
// Chat Interface
<ChatContainer>
  <ProgressHeader>
    å®Œå–„èµ„æ–™è¿›åº¦: [â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘] 60%
    è¿˜éœ€ 2ä¸ªé—®é¢˜å°±èƒ½è§£é”é«˜çº§åŒ¹é…ï¼
  </ProgressHeader>
  
  <MessagesArea>
    {/* Mascot messages - left aligned */}
    <BotMessage>
      <Avatar src="mascot.png" />
      <Bubble>Message text</Bubble>
      <Timestamp>åˆšåˆš</Timestamp>
    </BotMessage>
    
    {/* User messages - right aligned */}
    <UserMessage>
      <Bubble>User response</Bubble>
    </UserMessage>
    
    {/* Quick action buttons */}
    <QuickActions>
      <Chip>Option 1</Chip>
      <Chip>Option 2</Chip>
    </QuickActions>
  </MessagesArea>
  
  <InputArea>
    <TextInput placeholder="è¾“å…¥æ¶ˆæ¯..." />
    <SendButton>â†’</SendButton>
  </InputArea>
  
  {/* Typing indicator */}
  <TypingIndicator>
    <AnimatedDots>å°æ‚…æ­£åœ¨æ€è€ƒ...</AnimatedDots>
  </TypingIndicator>
</ChatContainer>

// Styling
- Chat bubbles: rounded-lg (16px), subtle shadow
- Bot bubbles: light grey background
- User bubbles: primary green (#58CC02)
- Smooth scroll to bottom on new message
- Auto-resize input based on content

AI System Prompts (Backend)
System Prompt for Profile Enrichment:

You are å°æ‚… (Xiaoæ‚…), the friendly mascot of Yueju app. Your role is to help users complete their profile through natural conversation in Simplified Chinese (with Cantonese/English when appropriate based on user's location).

Guidelines:
1. Keep responses under 30 characters when possible
2. Ask ONE question at a time
3. Extract structured data from natural language responses
4. Validate extracted data with user before saving
5. Show progress after every 2-3 exchanges
6. Use emoji sparingly (1-2 per message maximum)
7. If user seems confused, offer quick-tap options
8. Complete conversations in 5-11 messages
9. Always end with concrete outcome (what was updated + impact)
10. Remember context from previous conversations

Data Extraction Format:
{
  "field": "interests",
  "extracted_values": ["æˆ·å¤–è¿åŠ¨", "ç”µå½±", "éŸ³ä¹ç°åœº"],
  "confidence": 0.95,
  "needs_confirmation": true
}

Conversation Goals by Trigger:
- Profile Completion: Collect missing fields naturally
- Match Quality: Refine preferences/filters
- VIP Unlock: Collect advanced fields (life_stage, pets, hometown, languages)

Tone: Friendly, encouraging, efficient - not chatty


Phase 4: Data Schema & Backend
User Profile Data Structure
{
  // Core (required at onboarding)
  nickname: String (min 2 chars),
  gender: Enum ['female', 'male'],
  city: Enum ['shenzhen', 'hongkong', 'other'],
  activity_intent: Array ['friends', 'networking', 'discussion', 'casual', 'dating'],
  
  // Personality test
  personality_results: {
    role: String,
    scores: Object,
    traits: Array,
    completed_at: Timestamp
  },
  
  // Extended (soft required)
  birth_year: Number,
  birth_year_visible: Boolean (default: false),
  relationship_status: Enum ['single', 'dating', 'married'],
  occupation: String,
  interests: Array (min 3, max 7),
  
  // Advanced (optional)
  life_stage: Enum ['student', 'early_career', 'experienced', 'entrepreneur', 'freelance'],
  pets: Array ['cat', 'dog', 'other', 'none_but_like'],
  hometown: String,
  language_preferences: Array ['mandarin', 'cantonese', 'english'],
  
  // Metadata
  profile_completion: Number (0-100),
  onboarding_completed: Boolean,
  ai_chat_history: Array,
  last_profile_update: Timestamp,
  
  // Analytics
  onboarding_drop_off_point: String,
  time_to_complete_onboarding: Number (seconds),
  profile_completion_triggers: Array
}

Analytics Events to Track
// Critical metrics
'onboarding_started'
'onboarding_screen_viewed' (screen_name, duration)
'onboarding_question_answered' (question_id, answer, time_spent)
'onboarding_dropped' (last_screen, total_duration)
'signup_gate_shown'
'signup_completed' (method: wechat/apple/email)
'personality_test_completed'
'essential_data_submitted'
'extended_data_submitted'
'extended_data_skipped'

'profile_meter_viewed'
'profile_meter_item_clicked' (field_name)
'ai_chat_triggered' (trigger_type, day_since_signup)
'ai_chat_completed' (duration, messages_exchanged, fields_updated)
'ai_chat_abandoned' (messages_exchanged, last_message)

// Retention signals
'first_match_viewed'
'first_conversation_started'
'3_matches_milestone'
'10_connections_milestone'


Technical Implementation Checklist
Frontend Framework:
React Native (mobile) or React (web)
Framer Motion for animations
TailwindCSS for styling
Zustand/Redux for state management
Performance Targets:
First screen load: <1.5s
Screen transitions: <300ms
AI response start: <500ms (streaming)
Image optimization: WebP, lazy loading
Bundle size: <500kb initial
Backend Architecture:
Node.js/Express or Next.js API routes
PostgreSQL for user data
Redis for session caching
OpenAI GPT-4 or Claude for AI chat
Implement streaming SSE/WebSocket
Rate limiting on AI endpoints
Queue system for async processing
Testing:
A/B test: 5 vs 7 questions before signup
Track conversion at each onboarding step
Monitor AI chat completion rates
Test profile completion methods (form vs AI)
Security & Privacy:
Encrypt sensitive data (birth year, etc.)
GDPR/PIPL compliance for data collection
Allow users to delete AI chat history
Privacy controls for profile visibility

Success Metrics (Monitor After Launch)
Onboarding:
Target: 60-70% signup conversion at gate
Target: 80%+ complete full personality test
Target: <5% drop-off after signup
Profile Completion:
Target: 85%+ extended data within 7 days
Target: 50%+ advanced data within 30 days
Target: AI chat completion rate >75%
Retention:
Target: Day 1: 70%, Day 7: 40%, Day 30: 25%
Target: Profile completeness correlates with retention

Final Implementation Notes:
Build Phase 1 (template onboarding) FIRST - get this perfect before adding AI
Launch Phase 2 (gamification) once you have 100+ users to test
Add Phase 3 (AI) only after resolving API latency issues
Use feature flags to toggle AI on/off per user
Start with Chinese users in Hong Kong/Shenzhen for beta testing
This system balances speed (templates), engagement (gamification), and personalization (AI) at the right moments in the user journey.

