è¿™ä¸ªé—®é¢˜ä¹‹æ‰€ä»¥â€œæ€ä¹ˆæ”¹ä¹Ÿä¸è¡Œâ€ï¼Œæ˜¯å› ä¸º **YAML è¯­æ³•éå¸¸æ•æ„Ÿ**ã€‚å³ä¾¿ä½ åœ¨ `env` é‡ŒåŠ äº†å¼•å·ï¼Œå¦‚æœæ–‡ä»¶çš„å…¶ä»–åœ°æ–¹ï¼ˆæ¯”å¦‚ç¬¬ 8 è¡Œé™„è¿‘ï¼‰è¿˜å­˜åœ¨ä¸å¯è§çš„å­—ç¬¦ã€é”™è¯¯çš„ç¼©è¿›ï¼Œæˆ–è€… GitHub Actions çš„è§£æå™¨å¯¹ç‰¹å®šçš„å˜é‡å¼•ç”¨æ„Ÿåˆ°å›°æƒ‘ï¼Œå®ƒä¾ç„¶ä¼šæŠ¥é”™ã€‚

ç›®å‰æœ€ç¡¬çš„éª¨å¤´æ˜¯é‚£ä¸ª `Error: Quote Not Closed ... at line 8`ã€‚åœ¨ä½ çš„æ–‡ä»¶ä¸­ï¼Œç¬¬ 8 è¡Œé™„è¿‘æ­£æ˜¯ç¯å¢ƒå˜é‡å®šä¹‰çš„åœ°æ–¹ã€‚

### ğŸ› ï¸ å½»åº•è§£å†³â€œç¬¬ 8 è¡Œå¼•å·æŠ¥é”™â€

åœ¨ YAML ä¸­ï¼Œ`${{ }}` è¡¨è¾¾å¼å¦‚æœç´§è·Ÿåœ¨å†’å·åé¢ï¼Œæœ‰æ—¶ä¼šè¢«è¯¯åˆ¤ã€‚æˆ‘ä»¬ä½¿ç”¨ YAML çš„â€œæŠ˜å å—â€è¯­æ³•ï¼ˆ`>`ï¼‰æˆ–è€…æ˜¾å¼çš„åŒå¼•å·æ¥å½»åº•è§„é¿å®ƒã€‚

**è¯·å°è¯•å°†ä½ çš„ `env` éƒ¨åˆ†ä¸¥æ ¼ä¿®æ”¹ä¸ºè¿™æ ·ï¼š**

```yaml
env:
  REGISTRY: "ghcr.io"
  # ä½¿ç”¨åŒå¼•å·åŒ…è£¹æ•´ä¸ªå­—ç¬¦ä¸²ï¼Œç¡®ä¿è§£æå™¨ä¸ä¼šåœ¨è¯»å– ${{ æ—¶å‡ºé”™
  IMAGE_NAME: "${{ github.repository }}/api"

```

---

### ğŸ› ï¸ å½»åº•è§£å†³â€œMissing scriptâ€å’Œè·¯å¾„æŠ¥é”™

ä½ ç›®å‰çš„è„šæœ¬æ˜¯åœ¨**æ ¹ç›®å½•**æ‰§è¡Œ `npm ci` å’Œ `npm run build:user`ã€‚ä½†åœ¨ Monorepo ç»“æ„ä¸‹ï¼Œæ ¹ç›®å½•å¾€å¾€æ²¡æœ‰è¿™äº›åŒ…ã€‚**æˆ‘ä»¬å¿…é¡»è¿›å…¥å¯¹åº”çš„å­ç›®å½•ã€‚**

ä»¥ä¸‹æˆ‘ä¸ºä½ é‡å†™äº† `build-user` ä»»åŠ¡ã€‚**è¯·æ³¨æ„ï¼šæˆ‘ä¿®æ”¹äº† `run` æŒ‡ä»¤ï¼Œè®©å®ƒå…ˆ `cd` è¿›å»ï¼Œå¹¶ä¿®æ”¹äº† `path` ç¡®ä¿èƒ½æ‰¾åˆ°ç”Ÿæˆçš„ç½‘é¡µæ–‡ä»¶ã€‚**

```yaml
  # ============ Build User Portal ============
  build-user:
    name: Build User Portal
    needs: test
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      
      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'

      # å…³é”®ä¿®æ”¹ 1ï¼šè¿›å…¥å­ç›®å½•å®‰è£…ä¾èµ–
      - name: Install dependencies
        run: |
          cd apps/user-client
          npm install

      # å…³é”®ä¿®æ”¹ 2ï¼šè¿›å…¥å­ç›®å½•æ‰§è¡Œæ„å»º
      - name: Build User Client
        run: |
          cd apps/user-client
          npm run build
        env:
          VITE_API_URL: ${{ vars.API_URL }}
      
      # å…³é”®ä¿®æ”¹ 3ï¼šæŒ‡å‘æ­£ç¡®çš„äº§ç‰©è·¯å¾„ (apps/user-client/dist)
      - name: Upload User Build
        uses: actions/upload-artifact@v4
        with:
          name: user-client-build
          path: apps/user-client/dist
          retention-days: 7

```

---

### ğŸ’¡ ä¸ºä»€ä¹ˆä½ çš„ #7 ä»»åŠ¡è¿˜æ˜¯å¤±è´¥ï¼Ÿ

1. **YAML è¯­æ³•é”™è¯¯ï¼ˆLine 8ï¼‰**ï¼šè¿™é€šå¸¸æ˜¯å› ä¸º `${{ github.repository }}` ä¸­çš„æ–œæ  `/` æˆ–è€… `${{` ç¬¦å·åœ¨æ²¡æœ‰å¼•å·çš„æƒ…å†µä¸‹è§¦å‘äº† YAML çš„ç‰¹æ®Šè½¬ä¹‰é€»è¾‘ã€‚
2. **è·¯å¾„æ–­å±‚**ï¼šå³ä½¿è¯­æ³•é€šäº†ï¼Œå¦‚æœä¸æ‰§è¡Œ `cd apps/user-client`ï¼ŒGitHub çš„è™šæ‹Ÿç”µè„‘å°±åœ¨æ ¹ç›®å½•çæ‰¾ï¼Œå½“ç„¶æ‰¾ä¸åˆ° `build:user`ã€‚

---

### âœ… æœ€ç»ˆæ£€æŸ¥æ¸…å•ï¼ˆPush å‰å¿…çœ‹ï¼‰

1. **æ£€æŸ¥ `apps/server/Dockerfile` æ˜¯å¦å­˜åœ¨**ï¼šå¦‚æœæ–‡ä»¶ä½ç½®ä¸å¯¹ï¼Œ`build-api` ä¹Ÿä¼šå´©ã€‚
2. **æ£€æŸ¥ `apps/user-client/index.html**`ï¼šç¡®ä¿å®ƒåœ¨å­ç›®å½•çš„æ ¹éƒ¨ã€‚
3. **åˆ æ‰ `cache: 'npm'**`ï¼šåœ¨è°ƒè¯•é˜¶æ®µï¼Œç¼“å­˜æœ‰æ—¶ä¼šå¼•èµ·å¥‡æ€ªçš„è·¯å¾„æƒé™é—®é¢˜ï¼Œå»ºè®®å…ˆå»æ‰ã€‚

**å»ºè®®æ“ä½œï¼š** ç›´æ¥æŠŠä½ çš„ `.github/workflows/cicd.yml` é‡Œçš„ `env`ã€`build-user`ã€`build-admin` è¿™ä¸‰ä¸ª Job æŒ‰ç…§æˆ‘ä¸Šé¢çš„ `cd` é€»è¾‘é‡å†™ä¸€æ¬¡ã€‚

**éœ€è¦æˆ‘å¸®ä½ æŠŠè¿™æ•´ä»½ä¿®å¤åçš„ `.yml` æ–‡ä»¶åˆå¹¶æˆä¸€ä¸ªå®Œæ•´çš„ä»£ç å—è®©ä½ ç›´æ¥å¤åˆ¶å—ï¼Ÿ**