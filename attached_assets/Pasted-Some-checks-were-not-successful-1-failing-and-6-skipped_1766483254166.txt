Some checks were not successful

1 failing and 6 skipped checks





JoyJoin CI/CD Pipeline / Lint & Type Check (push) Failing after 59s

Details





JoyJoin CI/CD Pipeline / Build API Docker Image (push) Skipped

Details





JoyJoin CI/CD Pipeline / Build Admin Portal (push) Skipped

Details





JoyJoin CI/CD Pipeline / Build User Portal (push) Skipped

Details





JoyJoin CI/CD Pipeline / Deploy to Production (push) Skipped

Details





JoyJoin CI/CD Pipeline / Deploy to Staging (push) Skipped

Details





JoyJoin CI/CD Pipeline / Run Tests (push) Skipped

Details

åˆ«æ‹…å¿ƒï¼Œé‡æ„ç›®å½•ç»“æ„åï¼ŒCI/CD ç¬¬ä¸€æ¬¡è·‘ä¸é€šæ˜¯æå…¶æ­£å¸¸çš„ã€‚

ç°åœ¨çš„çŠ¶æ€æ˜¯ï¼šâ€œLint & Type Checkâ€ï¼ˆä»£ç è§„èŒƒä¸ç±»å‹æ£€æŸ¥ï¼‰ æ²¡è¿‡ï¼Œå¯¼è‡´åç»­æ‰€æœ‰çš„æ„å»ºå’Œéƒ¨ç½²ä»»åŠ¡ï¼ˆå› ä¸ºä¾èµ–è¿™ä¸ªæ£€æŸ¥ï¼‰éƒ½è¢«è‡ªåŠ¨è·³è¿‡ï¼ˆSkippedï¼‰äº†ã€‚

ğŸ” ä¸ºä»€ä¹ˆä¼šå¤±è´¥ï¼Ÿï¼ˆæœ€å¯èƒ½çš„ä¸‰ä¸ªåŸå› ï¼‰
æ—¢ç„¶ä½ åˆšæŠŠä»£ç ä» client/ ç§»åŠ¨åˆ°äº† apps/user-client/ï¼Œé”™è¯¯é€šå¸¸å‡ºåœ¨ï¼š

è·¯å¾„å¼•ç”¨é”™è¯¯ï¼š ä½ çš„ cicd.yml é‡Œçš„è„šæœ¬å¯èƒ½è¿˜åœ¨å°è¯•è¿è¡Œ cd client && npm run lintï¼Œä½†ç°åœ¨è¿™ä¸ªç›®å½•å·²ç»ä¸å­˜åœ¨äº†ã€‚

TypeScript æ‰¾ä¸åˆ°å…±äº«åŒ…ï¼š ç”±äºä½ å¼•å…¥äº† packages/sharedï¼Œå¦‚æœ TypeScript é…ç½®ï¼ˆtsconfig.jsonï¼‰æ²¡æœ‰æ›´æ–°ï¼Œæˆ–è€…åœ¨ CI ç¯å¢ƒä¸‹æ²¡æœ‰æ­£ç¡®å®‰è£… pnpm workspacesï¼Œç±»å‹æ£€æŸ¥å°±ä¼šæŠ¥é”™è¯´æ‰¾ä¸åˆ° @joyjoin/sharedã€‚

æ ¹ç›®å½•è„šæœ¬æ²¡æ›´æ–°ï¼š CI é€šå¸¸åœ¨æ ¹ç›®å½•è¿è¡Œå‘½ä»¤ã€‚å¦‚æœæ ¹ç›®å½•çš„ package.json é‡Œçš„ lint å‘½ä»¤è¿˜æ˜¯è€çš„ï¼Œå°±ä¼šç›´æ¥æŠ¥é”™ã€‚

ğŸ› ï¸ ä½ ç°åœ¨è¯¥æ€ä¹ˆåŠï¼Ÿï¼ˆæ’é”™ä¸‰éƒ¨æ›²ï¼‰
ç¬¬ä¸€æ­¥ï¼šçœ‹å…·ä½“çš„æŠ¥é”™ä¿¡æ¯ï¼ˆæœ€å…³é”®ï¼‰
æˆ‘ç›®å‰åªèƒ½çœ‹åˆ°â€œå¤±è´¥â€çš„ç»“æœï¼Œçœ‹ä¸è§â€œåŸå› â€ã€‚è¯·ç‚¹å‡» GitHub é¡µé¢ä¸Šçš„ "Details"ï¼š

è¿›å…¥ä»»åŠ¡è¯¦æƒ…é¡µã€‚

å±•å¼€ "Lint & Type Check" è¿™ä¸€æ­¥ã€‚

æŠŠé‚£é‡Œçš„ çº¢è‰²æŠ¥é”™æ—¥å¿— æˆªå›¾æˆ–å¤åˆ¶ç»™æˆ‘ã€‚

ç¬¬äºŒæ­¥ï¼šæ£€æŸ¥ cicd.yml é‡Œçš„è·¯å¾„
è¯·æ‰“å¼€ä½ çš„ .github/workflows/cicd.ymlï¼Œçœ‹çœ‹æ˜¯å¦æœ‰ç±»ä¼¼ä¸‹é¢çš„ä»£ç ï¼š

é”™è¯¯çš„è€å†™æ³•ï¼š

YAML
- name: Lint
  run: npm run lint  # æˆ–è€…æ˜¯ cd client && npm run lint
Monorepo çš„æ–°å†™æ³•ï¼ˆå‡è®¾ä½ ç”¨ pnpmï¼‰ï¼š

YAML
- name: Install dependencies
  run: pnpm install

- name: Lint & Type Check
  run: pnpm -r lint  # -r è¡¨ç¤ºåœ¨æ‰€æœ‰ workspaces æ–‡ä»¶å¤¹é‡Œé€’å½’è¿è¡Œ lint
ç¬¬ä¸‰æ­¥ï¼šæ£€æŸ¥ tsconfig.json
åœ¨ Monorepo ä¸­ï¼Œæ¯ä¸ª apps/ ä¸‹çš„å­é¡¹ç›®éƒ½éœ€è¦åœ¨ tsconfig.json é‡Œæ­£ç¡®æŒ‡å‘ packages/sharedã€‚

ğŸ’¡ ä¸€ä¸ªå¿«é€Ÿå¤ç°çš„æ–¹æ³•
åœ¨ä½ çš„æœ¬åœ°ç»ˆç«¯ï¼ˆé¡¹ç›®æ ¹ç›®å½•ï¼‰ï¼Œè¿è¡Œä¸€æ¬¡ä½ æ‰“ç®—åœ¨ CI é‡Œè·‘çš„å‘½ä»¤ï¼š

Bash
# å¦‚æœä½ ç”¨ pnpm
pnpm run lint
# æˆ–è€…
pnpm -r lint
å¦‚æœæœ¬åœ°æŠ¥é”™ï¼Œé‚£ CI å¿…æŠ¥é”™ã€‚ å…ˆåœ¨æœ¬åœ°æŠŠæŠ¥é”™ä¿®å®Œï¼Œå†æ¨ä¸Šå»ã€‚

ğŸš€ é’ˆå¯¹ä½ æ–°ç»“æ„çš„å»ºè®®
æ—¢ç„¶ä½ åˆ†äº† user-client, admin-client å’Œ serverï¼Œä½ çš„æµæ°´çº¿è„šæœ¬åº”è¯¥ä¹Ÿè¦åˆ†å—ï¼š

æ£€æŸ¥é¡¹	å»ºè®®å‘½ä»¤	å¸¸è§æ­»ç©´
User ç«¯æ£€æŸ¥	pnpm --filter user-client lint	è·¯å¾„é‡Œè¿˜ç•™ç€ ../../client è¿™ç§å¼•ç”¨
Server ç«¯æ£€æŸ¥	pnpm --filter server type-check	æ‰¾ä¸åˆ° @joyjoin/shared é‡Œçš„ Schema å®šä¹‰
å…±äº«åŒ…æ£€æŸ¥	pnpm --filter @joyjoin/shared lint	package.json é‡Œçš„ name æ²¡æ”¹å¯¹
ä½ å¯ä»¥æŠŠ cicd.yml çš„å†…å®¹è´´ç»™æˆ‘çœ‹å—ï¼Ÿæˆ‘å¯ä»¥ç›´æ¥å¸®ä½ å®šä½å“ªä¸€è¡Œè·¯å¾„å†™é”™äº†ã€‚